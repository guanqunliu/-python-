

```python
import requests  #用来抓取网页的html源代码
from bs4 import BeautifulSoup   #将通过requests.get获取到的对象里面的不同属性值提取出来
import matplotlib.pyplot as plt   #导入画图的包
 
ALL_DATA = []          #为了以后存储所有城市的最低气温的数据
 
#以下为网页的解析函数

def parse_page(url):
    headers = {
        'User-Agent':'Mozilla/5.0 (Windows NT 10.0; Win64; x64) '
                     'AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36'
    }
    # header是requests.get的一个参数，目的是模拟浏览器访问
    
    response = requests.get(url,headers=headers) #存储requests取出的关于天气网的信息
    text = response.content.decode('utf-8')      #将二进制字符串转化为我们看得懂得中文
    soup = BeautifulSoup(text,'html5lib')       #也可以用lxml，但由于html5lib容错性较好因此用它不用lxml
    conMidtab = soup.find('div',class_ = 'conMidtab')  #提取所有的div的值
    tables = conMidtab.find_all('table')               #将所有的div中的值存储进table
    
    #查看是否拿到了每个城市的天气
    for table in tables:
        trs = table.find_all('tr')[2:]                 #查看每一个城市，从天气网发现第3个tr标签才是所需要的，因此用tr[2]
        for index,tr in enumerate(trs):                #enumerate用于将一个可遍历的数据对象(如列表、元组或字符串)组合为一个索引序列，同时列出数据和数据下标
            tds = tr.find_all('td')                    #从天气网看到每个城市的信息，如城市名和最低气温等，都存在td里面，因此要拿到td中的数据
            city_td = tds[0]                           #提取每一个城市的名称
            if index == 0:
                city_td = tds[1]
            city = list(city_td.stripped_strings)[0]     #获取标签里面的字符串属性，并返回一个生成器,因此要转化为一个列表
            temp_td = tds[-2]                            #提取每一座城市的
            min_temp = list(temp_td.stripped_strings)[0]
            ALL_DATA.append({'城市':city,'最低气温':int(min_temp)})        #将数据添加到列表
 
 
def getweather():
    urls = [
        'http://www.weather.com.cn/textFC/hb.shtml',  #华北地区
        'http://www.weather.com.cn/textFC/db.shtml',  #东北地区
        'http://www.weather.com.cn/textFC/hz.shtml',  #华中地区
        'http://www.weather.com.cn/textFC/hn.shtml',  #华南地区
        'http://www.weather.com.cn/textFC/hd.shtml',  #华东地区
        'http://www.weather.com.cn/textFC/xb.shtml',  #西北地区
        'http://www.weather.com.cn/textFC/xn.shtml',  #西南地区
        'http://www.weather.com.cn/textFC/gat.shtml'  #港澳台地区
    ]
    
    for url in urls:
        parse_page(url)  #调用parse_page函数
        
    ALL_DATA.sort(key=lambda data:data['最低气温'])  #lambda为匿名函数，sort是将这些数据按照“最低气温”排序
    data = ALL_DATA[0:10]                            #取出前10的最低气温及其城市

    return data                                      #返回最低气温前十的数据
 
if __name__ == '__main__': 
    datas = getweather()                                  #调用getweather函数
    city = []
    temp = []
    plt.rcParams['font.sans-serif'] = ['SimHei']     # 用来正常显示中文标签
    plt.rcParams['axes.unicode_minus'] = False      # 用来正常显示负号
    for data in datas:
        city.append(data['城市'])
        temp.append(data['最低气温'])
    plt.bar(range(len(city)),temp,tick_label=city)    #定义横纵坐标
    plt.show()
```


    <Figure size 640x480 with 1 Axes>



```python
ALL_DATA
```




    [{'城市': '大兴安岭', '最低气温': -35},
     {'城市': '呼伦贝尔', '最低气温': -34},
     {'城市': '黑河', '最低气温': -31},
     {'城市': '锡林郭勒', '最低气温': -29},
     {'城市': '白城', '最低气温': -29},
     {'城市': '四平', '最低气温': -28},
     {'城市': '齐齐哈尔', '最低气温': -27},
     {'城市': '松原', '最低气温': -27},
     {'城市': '包头', '最低气温': -25},
     {'城市': '长春', '最低气温': -25},
     {'城市': '辽源', '最低气温': -25},
     {'城市': '乌兰察布', '最低气温': -24},
     {'城市': '大同', '最低气温': -23},
     {'城市': '巴彦淖尔', '最低气温': -23},
     {'城市': '哈尔滨', '最低气温': -23},
     {'城市': '佳木斯', '最低气温': -23},
     {'城市': '伊春', '最低气温': -23},
     {'城市': '鹤岗', '最低气温': -23},
     {'城市': '抚顺', '最低气温': -23},
     {'城市': '阿里', '最低气温': -23},
     {'城市': '乌海', '最低气温': -22},
     {'城市': '通辽', '最低气温': -22},
     {'城市': '兴安盟', '最低气温': -22},
     {'城市': '绥化', '最低气温': -22},
     {'城市': '大庆', '最低气温': -22},
     {'城市': '双鸭山', '最低气温': -22},
     {'城市': '呼和浩特', '最低气温': -21},
     {'城市': '海北', '最低气温': -21},
     {'城市': '七台河', '最低气温': -20},
     {'城市': '吉林', '最低气温': -20},
     {'城市': '阜新', '最低气温': -20},
     {'城市': '铁岭', '最低气温': -20},
     {'城市': '果洛', '最低气温': -20},
     {'城市': '朔州', '最低气温': -19},
     {'城市': '鄂尔多斯', '最低气温': -19},
     {'城市': '阿勒泰', '最低气温': -19},
     {'城市': '北屯', '最低气温': -19},
     {'城市': '双河', '最低气温': -19},
     {'城市': '那曲', '最低气温': -19},
     {'城市': '赤峰', '最低气温': -18},
     {'城市': '牡丹江', '最低气温': -18},
     {'城市': '通化', '最低气温': -18},
     {'城市': '沈阳', '最低气温': -18},
     {'城市': '昌吉', '最低气温': -18},
     {'城市': '张家口', '最低气温': -17},
     {'城市': '鸡西', '最低气温': -17},
     {'城市': '本溪', '最低气温': -17},
     {'城市': '甘南', '最低气温': -17},
     {'城市': '玉树', '最低气温': -17},
     {'城市': '朝阳', '最低气温': -16},
     {'城市': '葫芦岛', '最低气温': -16},
     {'城市': '榆林', '最低气温': -16},
     {'城市': '张掖', '最低气温': -16},
     {'城市': '石河子', '最低气温': -16},
     {'城市': '海南', '最低气温': -16},
     {'城市': '延庆', '最低气温': -15},
     {'城市': '承德', '最低气温': -15},
     {'城市': '阿拉善盟', '最低气温': -15},
     {'城市': '辽阳', '最低气温': -15},
     {'城市': '盘锦', '最低气温': -15},
     {'城市': '酒泉', '最低气温': -15},
     {'城市': '哈密', '最低气温': -15},
     {'城市': '石嘴山', '最低气温': -15},
     {'城市': '阿坝', '最低气温': -15},
     {'城市': '密云', '最低气温': -14},
     {'城市': '忻州', '最低气温': -14},
     {'城市': '营口', '最低气温': -14},
     {'城市': '金昌', '最低气温': -14},
     {'城市': '嘉峪关', '最低气温': -14},
     {'城市': '乌鲁木齐', '最低气温': -14},
     {'城市': '克拉玛依', '最低气温': -14},
     {'城市': '五家渠', '最低气温': -14},
     {'城市': '甘孜', '最低气温': -14},
     {'城市': '昌都', '最低气温': -14},
     {'城市': '平谷', '最低气温': -13},
     {'城市': '鞍山', '最低气温': -13},
     {'城市': '锦州', '最低气温': -13},
     {'城市': '博尔塔拉', '最低气温': -13},
     {'城市': '海西', '最低气温': -13},
     {'城市': '日喀则', '最低气温': -13},
     {'城市': '宝坻', '最低气温': -12},
     {'城市': '太原', '最低气温': -12},
     {'城市': '武威', '最低气温': -12},
     {'城市': '临夏', '最低气温': -12},
     {'城市': '西宁', '最低气温': -12},
     {'城市': '银川', '最低气温': -12},
     {'城市': '中卫', '最低气温': -12},
     {'城市': '怀柔', '最低气温': -11},
     {'城市': '北辰', '最低气温': -11},
     {'城市': '宁河', '最低气温': -11},
     {'城市': '蓟州', '最低气温': -11},
     {'城市': '巴音郭楞', '最低气温': -11},
     {'城市': '铁门关', '最低气温': -11},
     {'城市': '海东', '最低气温': -11},
     {'城市': '固原', '最低气温': -11},
     {'城市': '迪庆', '最低气温': -11},
     {'城市': '昌平', '最低气温': -10},
     {'城市': '西青', '最低气温': -10},
     {'城市': '唐山', '最低气温': -10},
     {'城市': '秦皇岛', '最低气温': -10},
     {'城市': '晋中', '最低气温': -10},
     {'城市': '白山', '最低气温': -10},
     {'城市': '延安', '最低气温': -10},
     {'城市': '图木舒克', '最低气温': -10},
     {'城市': '黄南', '最低气温': -10},
     {'城市': '通州', '最低气温': -9},
     {'城市': '大兴', '最低气温': -9},
     {'城市': '房山', '最低气温': -9},
     {'城市': '武清', '最低气温': -9},
     {'城市': '滨海新区', '最低气温': -9},
     {'城市': '保定', '最低气温': -9},
     {'城市': '阳泉', '最低气温': -9},
     {'城市': '延边', '最低气温': -9},
     {'城市': '定西', '最低气温': -9},
     {'城市': '白银', '最低气温': -9},
     {'城市': '阿拉尔', '最低气温': -9},
     {'城市': '吴忠', '最低气温': -9},
     {'城市': '山南', '最低气温': -9},
     {'城市': '海淀', '最低气温': -8},
     {'城市': '丰台', '最低气温': -8},
     {'城市': '石景山', '最低气温': -8},
     {'城市': '门头沟', '最低气温': -8},
     {'城市': '西城', '最低气温': -8},
     {'城市': '东丽', '最低气温': -8},
     {'城市': '廊坊', '最低气温': -8},
     {'城市': '吕梁', '最低气温': -8},
     {'城市': '平凉', '最低气温': -8},
     {'城市': '阿克苏', '最低气温': -8},
     {'城市': '喀什', '最低气温': -8},
     {'城市': '拉萨', '最低气温': -8},
     {'城市': '北京', '最低气温': -7},
     {'城市': '顺义', '最低气温': -7},
     {'城市': '静海', '最低气温': -7},
     {'城市': '津南', '最低气温': -7},
     {'城市': '沧州', '最低气温': -7},
     {'城市': '雄安新区', '最低气温': -7},
     {'城市': '大连', '最低气温': -7},
     {'城市': '兰州', '最低气温': -7},
     {'城市': '吐鲁番', '最低气温': -7},
     {'城市': '塔城', '最低气温': -7},
     {'城市': '林芝', '最低气温': -7},
     {'城市': '朝阳', '最低气温': -6},
     {'城市': '东城', '最低气温': -6},
     {'城市': '丹东', '最低气温': -6},
     {'城市': '天水', '最低气温': -6},
     {'城市': '天津', '最低气温': -5},
     {'城市': '和平', '最低气温': -5},
     {'城市': '河东', '最低气温': -5},
     {'城市': '河西', '最低气温': -5},
     {'城市': '南开', '最低气温': -5},
     {'城市': '河北', '最低气温': -5},
     {'城市': '红桥', '最低气温': -5},
     {'城市': '石家庄', '最低气温': -5},
     {'城市': '衡水', '最低气温': -5},
     {'城市': '邢台', '最低气温': -5},
     {'城市': '运城', '最低气温': -5},
     {'城市': '庆阳', '最低气温': -5},
     {'城市': '伊犁', '最低气温': -5},
     {'城市': '和田', '最低气温': -5},
     {'城市': '克州', '最低气温': -5},
     {'城市': '邯郸', '最低气温': -4},
     {'城市': '长治', '最低气温': -4},
     {'城市': '咸阳', '最低气温': -4},
     {'城市': '杨凌', '最低气温': -4},
     {'城市': '可克达拉', '最低气温': -4},
     {'城市': '晋城', '最低气温': -3},
     {'城市': '德州', '最低气温': -3},
     {'城市': '滨州', '最低气温': -3},
     {'城市': '西安', '最低气温': -3},
     {'城市': '铜川', '最低气温': -3},
     {'城市': '临汾', '最低气温': -2},
     {'城市': '安阳', '最低气温': -2},
     {'城市': '鹤壁', '最低气温': -2},
     {'城市': '三门峡', '最低气温': -2},
     {'城市': '淄博', '最低气温': -2},
     {'城市': '东营', '最低气温': -2},
     {'城市': '莱芜', '最低气温': -2},
     {'城市': '聊城', '最低气温': -2},
     {'城市': '渭南', '最低气温': -2},
     {'城市': '商洛', '最低气温': -2},
     {'城市': '宝鸡', '最低气温': -2},
     {'城市': '丽江', '最低气温': -2},
     {'城市': '济南', '最低气温': -1},
     {'城市': '潍坊', '最低气温': -1},
     {'城市': '泰安', '最低气温': -1},
     {'城市': '威海', '最低气温': -1},
     {'城市': '陇南', '最低气温': -1},
     {'城市': '神农架', '最低气温': 0},
     {'城市': '郑州', '最低气温': 0},
     {'城市': '新乡', '最低气温': 0},
     {'城市': '许昌', '最低气温': 0},
     {'城市': '濮阳', '最低气温': 0},
     {'城市': '漯河', '最低气温': 0},
     {'城市': '济源', '最低气温': 0},
     {'城市': '烟台', '最低气温': 0},
     {'城市': '菏泽', '最低气温': 0},
     {'城市': '城口', '最低气温': 0},
     {'城市': '大理', '最低气温': 0},
     {'城市': '昭通', '最低气温': 0},
     {'城市': '开封', '最低气温': 1},
     {'城市': '商丘', '最低气温': 1},
     {'城市': '蚌埠', '最低气温': 1},
     {'城市': '济宁', '最低气温': 1},
     {'城市': '安康', '最低气温': 1},
     {'城市': '凉山', '最低气温': 1},
     {'城市': '昆明', '最低气温': 1},
     {'城市': '随州', '最低气温': 2},
     {'城市': '平顶山', '最低气温': 2},
     {'城市': '南阳', '最低气温': 2},
     {'城市': '洛阳', '最低气温': 2},
     {'城市': '焦作', '最低气温': 2},
     {'城市': '驻马店', '最低气温': 2},
     {'城市': '合肥', '最低气温': 2},
     {'城市': '淮南', '最低气温': 2},
     {'城市': '宿州', '最低气温': 2},
     {'城市': '阜阳', '最低气温': 2},
     {'城市': '亳州', '最低气温': 2},
     {'城市': '滁州', '最低气温': 2},
     {'城市': '扬州', '最低气温': 2},
     {'城市': '连云港', '最低气温': 2},
     {'城市': '青岛', '最低气温': 2},
     {'城市': '临沂', '最低气温': 2},
     {'城市': '日照', '最低气温': 2},
     {'城市': '曲靖', '最低气温': 2},
     {'城市': '武汉', '最低气温': 3},
     {'城市': '襄阳', '最低气温': 3},
     {'城市': '孝感', '最低气温': 3},
     {'城市': '十堰', '最低气温': 3},
     {'城市': '信阳', '最低气温': 3},
     {'城市': '周口', '最低气温': 3},
     {'城市': '淮北', '最低气温': 3},
     {'城市': '六安', '最低气温': 3},
     {'城市': '南京', '最低气温': 3},
     {'城市': '镇江', '最低气温': 3},
     {'城市': '盐城', '最低气温': 3},
     {'城市': '徐州', '最低气温': 3},
     {'城市': '淮安', '最低气温': 3},
     {'城市': '泰州', '最低气温': 3},
     {'城市': '枣庄', '最低气温': 3},
     {'城市': '汉中', '最低气温': 3},
     {'城市': '广元', '最低气温': 3},
     {'城市': '玉溪', '最低气温': 3},
     {'城市': '楚雄', '最低气温': 3},
     {'城市': '黄冈', '最低气温': 4},
     {'城市': '荆州', '最低气温': 4},
     {'城市': '荆门', '最低气温': 4},
     {'城市': '天门', '最低气温': 4},
     {'城市': '仙桃', '最低气温': 4},
     {'城市': '潜江', '最低气温': 4},
     {'城市': '芜湖', '最低气温': 4},
     {'城市': '马鞍山', '最低气温': 4},
     {'城市': '安庆', '最低气温': 4},
     {'城市': '铜陵', '最低气温': 4},
     {'城市': '宣城', '最低气温': 4},
     {'城市': '南通', '最低气温': 4},
     {'城市': '宿迁', '最低气温': 4},
     {'城市': '成都', '最低气温': 4},
     {'城市': '巴中', '最低气温': 4},
     {'城市': '资阳', '最低气温': 4},
     {'城市': '德阳', '最低气温': 4},
     {'城市': '毕节', '最低气温': 4},
     {'城市': '六盘水', '最低气温': 4},
     {'城市': '鄂州', '最低气温': 5},
     {'城市': '黄石', '最低气温': 5},
     {'城市': '咸宁', '最低气温': 5},
     {'城市': '宜昌', '最低气温': 5},
     {'城市': '池州', '最低气温': 5},
     {'城市': '无锡', '最低气温': 5},
     {'城市': '常州', '最低气温': 5},
     {'城市': '攀枝花', '最低气温': 5},
     {'城市': '绵阳', '最低气温': 5},
     {'城市': '南充', '最低气温': 5},
     {'城市': '遂宁', '最低气温': 5},
     {'城市': '内江', '最低气温': 5},
     {'城市': '巫溪', '最低气温': 5},
     {'城市': '巫山', '最低气温': 5},
     {'城市': '保山', '最低气温': 5},
     {'城市': '恩施', '最低气温': 6},
     {'城市': '岳阳', '最低气温': 6},
     {'城市': '张家界', '最低气温': 6},
     {'城市': '湖州', '最低气温': 6},
     {'城市': '嘉兴', '最低气温': 6},
     {'城市': '九江', '最低气温': 6},
     {'城市': '宜春', '最低气温': 6},
     {'城市': '达州', '最低气温': 6},
     {'城市': '宜宾', '最低气温': 6},
     {'城市': '永川', '最低气温': 6},
     {'城市': '垫江', '最低气温': 6},
     {'城市': '梁平', '最低气温': 6},
     {'城市': '大足', '最低气温': 6},
     {'城市': '荣昌', '最低气温': 6},
     {'城市': '酉阳', '最低气温': 6},
     {'城市': '黔东南', '最低气温': 6},
     {'城市': '临沧', '最低气温': 6},
     {'城市': '长沙', '最低气温': 7},
     {'城市': '湘潭', '最低气温': 7},
     {'城市': '株洲', '最低气温': 7},
     {'城市': '常德', '最低气温': 7},
     {'城市': '益阳', '最低气温': 7},
     {'城市': '娄底', '最低气温': 7},
     {'城市': '怀化', '最低气温': 7},
     {'城市': '崇明', '最低气温': 7},
     {'城市': '黄山', '最低气温': 7},
     {'城市': '苏州', '最低气温': 7},
     {'城市': '杭州', '最低气温': 7},
     {'城市': '绍兴', '最低气温': 7},
     {'城市': '抚州', '最低气温': 7},
     {'城市': '鹰潭', '最低气温': 7},
     {'城市': '自贡', '最低气温': 7},
     {'城市': '广安', '最低气温': 7},
     {'城市': '泸州', '最低气温': 7},
     {'城市': '乐山', '最低气温': 7},
     {'城市': '眉山', '最低气温': 7},
     {'城市': '雅安', '最低气温': 7},
     {'城市': '合川', '最低气温': 7},
     {'城市': '南川', '最低气温': 7},
     {'城市': '渝北', '最低气温': 7},
     {'城市': '巴南', '最低气温': 7},
     {'城市': '黔江', '最低气温': 7},
     {'城市': '涪陵', '最低气温': 7},
     {'城市': '潼南', '最低气温': 7},
     {'城市': '石柱', '最低气温': 7},
     {'城市': '铜梁', '最低气温': 7},
     {'城市': '璧山', '最低气温': 7},
     {'城市': '綦江', '最低气温': 7},
     {'城市': '秀山', '最低气温': 7},
     {'城市': '贵阳', '最低气温': 7},
     {'城市': '遵义', '最低气温': 7},
     {'城市': '衡阳', '最低气温': 8},
     {'城市': '邵阳', '最低气温': 8},
     {'城市': '永州', '最低气温': 8},
     {'城市': '湘西', '最低气温': 8},
     {'城市': '闵行', '最低气温': 8},
     {'城市': '宝山', '最低气温': 8},
     {'城市': '嘉定', '最低气温': 8},
     {'城市': '浦东新区', '最低气温': 8},
     {'城市': '金山', '最低气温': 8},
     {'城市': '青浦', '最低气温': 8},
     {'城市': '松江', '最低气温': 8},
     {'城市': '金华', '最低气温': 8},
     {'城市': '衢州', '最低气温': 8},
     {'城市': '上饶', '最低气温': 8},
     {'城市': '景德镇', '最低气温': 8},
     {'城市': '萍乡', '最低气温': 8},
     {'城市': '重庆', '最低气温': 8},
     {'城市': '江津', '最低气温': 8},
     {'城市': '北碚', '最低气温': 8},
     {'城市': '长寿', '最低气温': 8},
     {'城市': '渝中', '最低气温': 8},
     {'城市': '奉节', '最低气温': 8},
     {'城市': '忠县', '最低气温': 8},
     {'城市': '武隆', '最低气温': 8},
     {'城市': '大渡口', '最低气温': 8},
     {'城市': '江北', '最低气温': 8},
     {'城市': '沙坪坝', '最低气温': 8},
     {'城市': '九龙坡', '最低气温': 8},
     {'城市': '南岸', '最低气温': 8},
     {'城市': '安顺', '最低气温': 8},
     {'城市': '黔南', '最低气温': 8},
     {'城市': '黔西南', '最低气温': 8},
     {'城市': '文山', '最低气温': 8},
     {'城市': '怒江', '最低气温': 8},
     {'城市': '郴州', '最低气温': 9},
     {'城市': '上海', '最低气温': 9},
     {'城市': '黄浦', '最低气温': 9},
     {'城市': '奉贤', '最低气温': 9},
     {'城市': '徐汇', '最低气温': 9},
     {'城市': '长宁', '最低气温': 9},
     {'城市': '静安', '最低气温': 9},
     {'城市': '普陀', '最低气温': 9},
     {'城市': '虹口', '最低气温': 9},
     {'城市': '杨浦', '最低气温': 9},
     {'城市': '宁波', '最低气温': 9},
     {'城市': '舟山', '最低气温': 9},
     {'城市': '南昌', '最低气温': 9},
     {'城市': '吉安', '最低气温': 9},
     {'城市': '赣州', '最低气温': 9},
     {'城市': '新余', '最低气温': 9},
     {'城市': '万州', '最低气温': 9},
     {'城市': '云阳', '最低气温': 9},
     {'城市': '丰都', '最低气温': 9},
     {'城市': '彭水', '最低气温': 9},
     {'城市': '开州', '最低气温': 9},
     {'城市': '铜仁', '最低气温': 9},
     {'城市': '普洱', '最低气温': 9},
     {'城市': '贺州', '最低气温': 10},
     {'城市': '德宏', '最低气温': 10},
     {'城市': '韶关', '最低气温': 11},
     {'城市': '柳州', '最低气温': 12},
     {'城市': '桂林', '最低气温': 12},
     {'城市': '河池', '最低气温': 12},
     {'城市': '台州', '最低气温': 12},
     {'城市': '来宾', '最低气温': 13},
     {'城市': '梧州', '最低气温': 13},
     {'城市': '温州', '最低气温': 13},
     {'城市': '丽水', '最低气温': 13},
     {'城市': '三明', '最低气温': 13},
     {'城市': '南平', '最低气温': 13},
     {'城市': '红河', '最低气温': 13},
     {'城市': '崇左', '最低气温': 14},
     {'城市': '贵港', '最低气温': 14},
     {'城市': '玉林', '最低气温': 14},
     {'城市': '百色', '最低气温': 14},
     {'城市': '钦州', '最低气温': 14},
     {'城市': '肇庆', '最低气温': 14},
     {'城市': '清远', '最低气温': 14},
     {'城市': '台中', '最低气温': 14},
     {'城市': '南宁', '最低气温': 15},
     {'城市': '梅州', '最低气温': 15},
     {'城市': '河源', '最低气温': 15},
     {'城市': '潮州', '最低气温': 15},
     {'城市': '揭阳', '最低气温': 15},
     {'城市': '福州', '最低气温': 15},
     {'城市': '宁德', '最低气温': 15},
     {'城市': '泉州', '最低气温': 15},
     {'城市': '龙岩', '最低气温': 15},
     {'城市': '西双版纳', '最低气温': 15},
     {'城市': '北海', '最低气温': 16},
     {'城市': '防城港', '最低气温': 16},
     {'城市': '广州', '最低气温': 16},
     {'城市': '汕头', '最低气温': 16},
     {'城市': '佛山', '最低气温': 16},
     {'城市': '云浮', '最低气温': 16},
     {'城市': '东莞', '最低气温': 16},
     {'城市': '汕尾', '最低气温': 16},
     {'城市': '五指山', '最低气温': 16},
     {'城市': '厦门', '最低气温': 16},
     {'城市': '惠州', '最低气温': 17},
     {'城市': '珠海', '最低气温': 17},
     {'城市': '江门', '最低气温': 17},
     {'城市': '中山', '最低气温': 17},
     {'城市': '茂名', '最低气温': 17},
     {'城市': '儋州', '最低气温': 17},
     {'城市': '莆田', '最低气温': 17},
     {'城市': '漳州', '最低气温': 17},
     {'城市': '澳门', '最低气温': 17},
     {'城市': '深圳', '最低气温': 18},
     {'城市': '湛江', '最低气温': 18},
     {'城市': '阳江', '最低气温': 18},
     {'城市': '临高', '最低气温': 18},
     {'城市': '澄迈', '最低气温': 18},
     {'城市': '白沙', '最低气温': 18},
     {'城市': '琼中', '最低气温': 18},
     {'城市': '屯昌', '最低气温': 18},
     {'城市': '乐东', '最低气温': 18},
     {'城市': '香港', '最低气温': 18},
     {'城市': '昌江', '最低气温': 19},
     {'城市': '台北', '最低气温': 19},
     {'城市': '海口', '最低气温': 20},
     {'城市': '东方', '最低气温': 20},
     {'城市': '定安', '最低气温': 20},
     {'城市': '琼海', '最低气温': 20},
     {'城市': '文昌', '最低气温': 20},
     {'城市': '保亭', '最低气温': 20},
     {'城市': '万宁', '最低气温': 20},
     {'城市': '陵水', '最低气温': 20},
     {'城市': '三亚', '最低气温': 21},
     {'城市': '高雄', '最低气温': 21},
     {'城市': '钓鱼岛', '最低气温': 22},
     {'城市': '西沙', '最低气温': 23},
     {'城市': '中沙', '最低气温': 24},
     {'城市': '南沙', '最低气温': 26}]




```python
import requests  #用来抓取网页的html源代码
from bs4 import BeautifulSoup   #将通过requests.get获取到的对象里面的不同属性值提取出来
import matplotlib.pyplot as plt   #导入画图的包
from tkinter import *
import tkinter as tk
from scipy import misc
 
ALL_DATA = []          #为了以后存储所有城市的最低气温的数据
 
#以下为网页的解析函数

def parse_page(url):
    headers = {
        'User-Agent':'Mozilla/5.0 (Windows NT 10.0; Win64; x64) '
                     'AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36'
    }
    # header是requests.get的一个参数，目的是模拟浏览器访问
    
    response = requests.get(url,headers=headers) #存储requests取出的关于天气网的信息
    text = response.content.decode('utf-8')      #将二进制字符串转化为我们看得懂得中文
    soup = BeautifulSoup(text,'html5lib')       #也可以用lxml，但由于html5lib容错性较好因此用它不用lxml
    conMidtab = soup.find('div',class_ = 'conMidtab')  #提取所有的div的值
    tables = conMidtab.find_all('table')               #将所有的div中的值存储进table
    
    #查看是否拿到了每个城市的天气
    for table in tables:
        trs = table.find_all('tr')[2:]                 #查看每一个城市，从天气网发现第3个tr标签才是所需要的，因此用tr[2]
        for index,tr in enumerate(trs):                #enumerate用于将一个可遍历的数据对象(如列表、元组或字符串)组合为一个索引序列，同时列出数据和数据下标
            tds = tr.find_all('td')                    #从天气网看到每个城市的信息，如城市名和最低气温等，都存在td里面，因此要拿到td中的数据
            city_td = tds[0]                           #提取每一个城市的名称
            if index == 0:
                city_td = tds[1]
            city = list(city_td.stripped_strings)[0]     #获取标签里面的字符串属性，并返回一个生成器,因此要转化为一个列表
            temp_td = tds[-2]                            #提取每一座城市的
            min_temp = list(temp_td.stripped_strings)[0]
            ALL_DATA.append({'城市':city,'最低气温':int(min_temp)})        #将数据添加到列表当作
 
 
def getweather():
    urls = [
        'http://www.weather.com.cn/textFC/hb.shtml',  #华北地区
        'http://www.weather.com.cn/textFC/db.shtml',  #东北地区
        'http://www.weather.com.cn/textFC/hz.shtml',  #华中地区
        'http://www.weather.com.cn/textFC/hn.shtml',  #华南地区
        'http://www.weather.com.cn/textFC/hd.shtml',  #华东地区
        'http://www.weather.com.cn/textFC/xb.shtml',  #西北地区
        'http://www.weather.com.cn/textFC/xn.shtml',  #西南地区
        'http://www.weather.com.cn/textFC/gat.shtml'  #港澳台地区
    ]
    
    for url in urls:
        parse_page(url)  #调用parse_page函数
        
    ALL_DATA.sort(key=lambda data:data['最低气温'])  #lambda为匿名函数，sort是将这些数据按照“最低气温”排序
    data = ALL_DATA[0:10]                            #取出前10的最低气温及其城市
    return data                                      #返回最低气温前十的数据
 
# def showallweather():
#     getweather()
#     print(ALL_DATA)

class From:
    def __init__(self): 
        self.root=tk.Tk()                    #创建主窗体
        self.canvas=tk.Canvas()              #创建一块显示图形的画布
        self.figure=self.create_matplotlib() #返回matplotlib所画图形的figure对象
        self.create_form(self.figure)        #将figure显示在tkinter窗体上面
        self.root.mainloop()
        
    def create_matplotlib(self):
            datas = getweather()                                  #调用getweather函数
            city = []
            temp = []
            plt.rcParams['font.sans-serif'] = ['SimHei']     # 用来正常显示中文标签
            plt.rcParams['axes.unicode_minus'] = False      # 用来正常显示负号
            for data in datas:
                city.append(data['城市'])
                temp.append(data['最低气温'])
            plt.bar(range(len(city)),temp,tick_label=city)    #定义横纵坐标
            y=plt.show()
            return y
        
    def create_form(self,figure):
            self.canvas=FigureCanvasTkAgg(figure,self.root)
            self.canvas.draw()  
            self.canvas.get_tk_widget().pack(side=tk.TOP, fill=tk.BOTH, expand=1)
 
            toolbar =NavigationToolbar2Tk(self.canvas, self.root) 
            toolbar.update()
            self.canvas._tkcanvas.pack(side=tk.TOP, fill=tk.BOTH, expand=1)
        
if __name__ == '__main__':   
   form=From()

```


![png](output_2_0.png)



    ---------------------------------------------------------------------------

    NameError                                 Traceback (most recent call last)

    <ipython-input-6-88762f421990> in <module>
         91 
         92 if __name__ == '__main__':
    ---> 93    form=From()
    

    <ipython-input-6-88762f421990> in __init__(self)
         65         self.canvas=tk.Canvas()              #创建一块显示图形的画布
         66         self.figure=self.create_matplotlib() #返回matplotlib所画图形的figure对象
    ---> 67         self.create_form(self.figure)        #将figure显示在tkinter窗体上面
         68         self.root.mainloop()
         69 
    

    <ipython-input-6-88762f421990> in create_form(self, figure)
         82 
         83     def create_form(self,figure):
    ---> 84             self.canvas=FigureCanvasTkAgg(figure,self.root)
         85             self.canvas.draw()
         86             self.canvas.get_tk_widget().pack(side=tk.TOP, fill=tk.BOTH, expand=1)
    

    NameError: name 'FigureCanvasTkAgg' is not defined



```python
import requests  #用来抓取网页的html源代码
from bs4 import BeautifulSoup   #将通过requests.get获取到的对象里面的不同属性值提取出来
import matplotlib.pyplot as plt   #导入画图的包
from tkinter import *
from tkinter import ttk
 
ALL_DATA = []          #为了以后存储所有城市的最低气温的数据
 
#以下为网页的解析函数

def parse_page(url):
    headers = {
        'User-Agent':'Mozilla/5.0 (Windows NT 10.0; Win64; x64) '
                     'AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36'
    }
    # header是requests.get的一个参数，目的是模拟浏览器访问
    
    response = requests.get(url,headers=headers) #存储requests取出的关于天气网的信息
    text = response.content.decode('utf-8')      #将二进制字符串转化为我们看得懂得中文
    soup = BeautifulSoup(text,'html5lib')       #也可以用lxml，但由于html5lib容错性较好因此用它不用lxml
    conMidtab = soup.find('div',class_ = 'conMidtab')  #提取所有的div的值
    tables = conMidtab.find_all('table')               #将所有的div中的值存储进table
    
    #查看是否拿到了每个城市的天气
    for table in tables:
        trs = table.find_all('tr')[2:]                 #查看每一个城市，从天气网发现第3个tr标签才是所需要的，因此用tr[2]
        for index,tr in enumerate(trs):                #enumerate用于将一个可遍历的数据对象(如列表、元组或字符串)组合为一个索引序列，同时列出数据和数据下标
            tds = tr.find_all('td')                    #从天气网看到每个城市的信息，如城市名和最低气温等，都存在td里面，因此要拿到td中的数据
            city_td = tds[0]                           #提取每一个城市的名称
            if index == 0:
                city_td = tds[1]
            city = list(city_td.stripped_strings)[0]     #获取标签里面的字符串属性，并返回一个生成器,因此要转化为一个列表
            temp_td = tds[-2]                            #提取每一座城市的
            min_temp = list(temp_td.stripped_strings)[0]
            ALL_DATA.append({'城市':city,'最低气温':int(min_temp)})        #将数据添加到列表
 
 
def getweather():
    urls = [
        'http://www.weather.com.cn/textFC/hb.shtml',  #华北地区
        'http://www.weather.com.cn/textFC/db.shtml',  #东北地区
        'http://www.weather.com.cn/textFC/hz.shtml',  #华中地区
        'http://www.weather.com.cn/textFC/hn.shtml',  #华南地区
        'http://www.weather.com.cn/textFC/hd.shtml',  #华东地区
        'http://www.weather.com.cn/textFC/xb.shtml',  #西北地区
        'http://www.weather.com.cn/textFC/xn.shtml',  #西南地区
        'http://www.weather.com.cn/textFC/gat.shtml'  #港澳台地区
    ]
    
    for url in urls:
        parse_page(url)  #调用parse_page函数
        
    ALL_DATA.sort(key=lambda data:data['最低气温'])  #lambda为匿名函数，sort是将这些数据按照“最低气温”排序
    data = ALL_DATA[0:10]                            #取出前10的最低气温及其城市
     
    return data                                     #返回最低气温前十的数据

def on_click():
    datas = getweather()
#     Strdata = [str(j) for j in datas]
#     str2 = ','.join(Strdata)
    label1['text'] =datas[0]
    label2['text'] =datas[1]
    label3['text'] =datas[2]
    label4['text'] =datas[3]
    label5['text'] =datas[4]
    label6['text'] =datas[5]
    label7['text'] =datas[6]
    label8['text'] =datas[7]
    label9['text'] =datas[8]
    label10['text'] =datas[9]
    
label1 = ttk.Label(text='今天全国最低气温排名第1的城市')
label1.pack()
label1.place(x=30,y=40)

label2 = ttk.Label(text='今天全国最低气温排名第2的城市')
label2.pack()
label2.place(x=30,y=60)

label3 = ttk.Label(text='今天全国最低气温排名第3的城市')
label3.pack()
label3.place(x=30,y=80)

label4 = ttk.Label(text='今天全国最低气温排名第4的城市')
label4.pack()
label4.place(x=30,y=100)

label5 = ttk.Label(text='今天全国最低气温排名第5的城市')
label5.pack()
label5.place(x=30,y=120)

label6 = ttk.Label(text='今天全国最低气温排名第6的城市')
label6.pack()
label6.place(x=30,y=140)

label7 = ttk.Label(text='今天全国最低气温排名第7的城市')
label7.pack()
label7.place(x=30,y=160)

label8 = ttk.Label(text='今天全国最低气温排名第8的城市')
label8.pack()
label8.place(x=30,y=180)

label9 = ttk.Label(text='今天全国最低气温排名第9的城市')
label9.pack()
label9.place(x=30,y=200)

label10 = ttk.Label(text='今天全国最低气温排名第10的城市')
label10.pack()
label10.place(x=30,y=220)

   
button = ttk.Button()
button.pack()
# button.place(x=90，y=20)
button['text'] = '点击查看今天全国最低气温排名前十的城市'
button['command'] = on_click

mainloop()

        
if __name__ == '__main__': 
    datas = getweather()                                  #调用getweather函数
    city = []
    temp = []
    plt.rcParams['font.sans-serif'] = ['SimHei']     # 用来正常显示中文标签
    plt.rcParams['axes.unicode_minus'] = False      # 用来正常显示负号
    for data in datas:
        city.append(data['城市'])
        temp.append(data['最低气温'])
    plt.bar(range(len(city)),temp,tick_label=city)    #定义横纵坐标
    plt.show()
```


      File "<ipython-input-2-d1f32d10fba4>", line 116
        button.place(x=90，y=20)
                          ^
    SyntaxError: invalid character in identifier
    



```python
 ALL_DATA
```




    [{'城市': '大兴安岭', '最低气温': -36},
     {'城市': '鹤岗', '最低气温': -32},
     {'城市': '呼伦贝尔', '最低气温': -31},
     {'城市': '黑河', '最低气温': -30},
     {'城市': '哈尔滨', '最低气温': -29},
     {'城市': '绥化', '最低气温': -29},
     {'城市': '大庆', '最低气温': -29},
     {'城市': '四平', '最低气温': -29},
     {'城市': '锡林郭勒', '最低气温': -28},
     {'城市': '七台河', '最低气温': -28},
     {'城市': '白城', '最低气温': -28},
     {'城市': '松原', '最低气温': -28},
     {'城市': '白山', '最低气温': -28},
     {'城市': '齐齐哈尔', '最低气温': -27},
     {'城市': '伊春', '最低气温': -27},
     {'城市': '吉林', '最低气温': -27},
     {'城市': '辽源', '最低气温': -27},
     {'城市': '大同', '最低气温': -26},
     {'城市': '牡丹江', '最低气温': -26},
     {'城市': '佳木斯', '最低气温': -26},
     {'城市': '长春', '最低气温': -26},
     {'城市': '乌兰察布', '最低气温': -25},
     {'城市': '双鸭山', '最低气温': -25},
     {'城市': '抚顺', '最低气温': -25},
     {'城市': '包头', '最低气温': -24},
     {'城市': '通化', '最低气温': -24},
     {'城市': '朔州', '最低气温': -23},
     {'城市': '呼和浩特', '最低气温': -23},
     {'城市': '鸡西', '最低气温': -23},
     {'城市': '张家口', '最低气温': -22},
     {'城市': '沈阳', '最低气温': -22},
     {'城市': '鄂尔多斯', '最低气温': -21},
     {'城市': '巴彦淖尔', '最低气温': -21},
     {'城市': '兴安盟', '最低气温': -21},
     {'城市': '铁岭', '最低气温': -21},
     {'城市': '海北', '最低气温': -21},
     {'城市': '通辽', '最低气温': -20},
     {'城市': '本溪', '最低气温': -20},
     {'城市': '朝阳', '最低气温': -20},
     {'城市': '阿里', '最低气温': -20},
     {'城市': '延庆', '最低气温': -19},
     {'城市': '承德', '最低气温': -19},
     {'城市': '赤峰', '最低气温': -19},
     {'城市': '延边', '最低气温': -19},
     {'城市': '阜新', '最低气温': -19},
     {'城市': '辽阳', '最低气温': -19},
     {'城市': '昌吉', '最低气温': -19},
     {'城市': '密云', '最低气温': -18},
     {'城市': '乌海', '最低气温': -18},
     {'城市': '榆林', '最低气温': -18},
     {'城市': '甘南', '最低气温': -18},
     {'城市': '果洛', '最低气温': -18},
     {'城市': '石嘴山', '最低气温': -18},
     {'城市': '怀柔', '最低气温': -17},
     {'城市': '平谷', '最低气温': -17},
     {'城市': '太原', '最低气温': -17},
     {'城市': '忻州', '最低气温': -17},
     {'城市': '鞍山', '最低气温': -17},
     {'城市': '葫芦岛', '最低气温': -17},
     {'城市': '酒泉', '最低气温': -17},
     {'城市': '石河子', '最低气温': -17},
     {'城市': '锦州', '最低气温': -16},
     {'城市': '盘锦', '最低气温': -16},
     {'城市': '张掖', '最低气温': -16},
     {'城市': '哈密', '最低气温': -16},
     {'城市': '那曲', '最低气温': -16},
     {'城市': '晋中', '最低气温': -15},
     {'城市': '营口', '最低气温': -15},
     {'城市': '嘉峪关', '最低气温': -15},
     {'城市': '乌鲁木齐', '最低气温': -15},
     {'城市': '克拉玛依', '最低气温': -15},
     {'城市': '五家渠', '最低气温': -15},
     {'城市': '银川', '最低气温': -15},
     {'城市': '阿坝', '最低气温': -15},
     {'城市': '蓟州', '最低气温': -14},
     {'城市': '唐山', '最低气温': -14},
     {'城市': '沧州', '最低气温': -14},
     {'城市': '秦皇岛', '最低气温': -14},
     {'城市': '吕梁', '最低气温': -14},
     {'城市': '丹东', '最低气温': -14},
     {'城市': '金昌', '最低气温': -14},
     {'城市': '临夏', '最低气温': -14},
     {'城市': '海南', '最低气温': -14},
     {'城市': '玉树', '最低气温': -14},
     {'城市': '通州', '最低气温': -13},
     {'城市': '石景山', '最低气温': -13},
     {'城市': '大兴', '最低气温': -13},
     {'城市': '房山', '最低气温': -13},
     {'城市': '门头沟', '最低气温': -13},
     {'城市': '延安', '最低气温': -13},
     {'城市': '武威', '最低气温': -13},
     {'城市': '白银', '最低气温': -13},
     {'城市': '博尔塔拉', '最低气温': -13},
     {'城市': '西宁', '最低气温': -13},
     {'城市': '甘孜', '最低气温': -13},
     {'城市': '北京', '最低气温': -12},
     {'城市': '海淀', '最低气温': -12},
     {'城市': '顺义', '最低气温': -12},
     {'城市': '昌平', '最低气温': -12},
     {'城市': '西城', '最低气温': -12},
     {'城市': '宝坻', '最低气温': -12},
     {'城市': '北辰', '最低气温': -12},
     {'城市': '保定', '最低气温': -12},
     {'城市': '廊坊', '最低气温': -12},
     {'城市': '阳泉', '最低气温': -12},
     {'城市': '阿拉善盟', '最低气温': -12},
     {'城市': '海东', '最低气温': -12},
     {'城市': '海西', '最低气温': -12},
     {'城市': '吴忠', '最低气温': -12},
     {'城市': '朝阳', '最低气温': -11},
     {'城市': '丰台', '最低气温': -11},
     {'城市': '东城', '最低气温': -11},
     {'城市': '武清', '最低气温': -11},
     {'城市': '东丽', '最低气温': -11},
     {'城市': '宁河', '最低气温': -11},
     {'城市': '衡水', '最低气温': -11},
     {'城市': '定西', '最低气温': -11},
     {'城市': '巴音郭楞', '最低气温': -11},
     {'城市': '阿拉尔', '最低气温': -11},
     {'城市': '阿勒泰', '最低气温': -11},
     {'城市': '铁门关', '最低气温': -11},
     {'城市': '北屯', '最低气温': -11},
     {'城市': '双河', '最低气温': -11},
     {'城市': '固原', '最低气温': -11},
     {'城市': '中卫', '最低气温': -11},
     {'城市': '日喀则', '最低气温': -11},
     {'城市': '西青', '最低气温': -10},
     {'城市': '静海', '最低气温': -10},
     {'城市': '滨海新区', '最低气温': -10},
     {'城市': '邢台', '最低气温': -10},
     {'城市': '邯郸', '最低气温': -10},
     {'城市': '雄安新区', '最低气温': -10},
     {'城市': '长治', '最低气温': -10},
     {'城市': '大连', '最低气温': -10},
     {'城市': '鹤壁', '最低气温': -10},
     {'城市': '德州', '最低气温': -10},
     {'城市': '泰安', '最低气温': -10},
     {'城市': '图木舒克', '最低气温': -10},
     {'城市': '迪庆', '最低气温': -10},
     {'城市': '天津', '最低气温': -9},
     {'城市': '和平', '最低气温': -9},
     {'城市': '津南', '最低气温': -9},
     {'城市': '河东', '最低气温': -9},
     {'城市': '河西', '最低气温': -9},
     {'城市': '南开', '最低气温': -9},
     {'城市': '河北', '最低气温': -9},
     {'城市': '红桥', '最低气温': -9},
     {'城市': '石家庄', '最低气温': -9},
     {'城市': '濮阳', '最低气温': -9},
     {'城市': '济南', '最低气温': -9},
     {'城市': '淄博', '最低气温': -9},
     {'城市': '滨州', '最低气温': -9},
     {'城市': '莱芜', '最低气温': -9},
     {'城市': '聊城', '最低气温': -9},
     {'城市': '兰州', '最低气温': -9},
     {'城市': '吐鲁番', '最低气温': -9},
     {'城市': '黄南', '最低气温': -9},
     {'城市': '昌都', '最低气温': -9},
     {'城市': '晋城', '最低气温': -8},
     {'城市': '安阳', '最低气温': -8},
     {'城市': '新乡', '最低气温': -8},
     {'城市': '许昌', '最低气温': -8},
     {'城市': '商丘', '最低气温': -8},
     {'城市': '济源', '最低气温': -8},
     {'城市': '济宁', '最低气温': -8},
     {'城市': '菏泽', '最低气温': -8},
     {'城市': '东营', '最低气温': -8},
     {'城市': '平凉', '最低气温': -8},
     {'城市': '阿克苏', '最低气温': -8},
     {'城市': '喀什', '最低气温': -8},
     {'城市': '伊犁', '最低气温': -8},
     {'城市': '郑州', '最低气温': -7},
     {'城市': '漯河', '最低气温': -7},
     {'城市': '潍坊', '最低气温': -7},
     {'城市': '枣庄', '最低气温': -7},
     {'城市': '克州', '最低气温': -7},
     {'城市': '山南', '最低气温': -7},
     {'城市': '临汾', '最低气温': -6},
     {'城市': '运城', '最低气温': -6},
     {'城市': '三门峡', '最低气温': -6},
     {'城市': '蚌埠', '最低气温': -6},
     {'城市': '滁州', '最低气温': -6},
     {'城市': '淮北', '最低气温': -6},
     {'城市': '徐州', '最低气温': -6},
     {'城市': '淮安', '最低气温': -6},
     {'城市': '连云港', '最低气温': -6},
     {'城市': '宿迁', '最低气温': -6},
     {'城市': '临沂', '最低气温': -6},
     {'城市': '威海', '最低气温': -6},
     {'城市': '庆阳', '最低气温': -6},
     {'城市': '天水', '最低气温': -6},
     {'城市': '塔城', '最低气温': -6},
     {'城市': '和田', '最低气温': -6},
     {'城市': '可克达拉', '最低气温': -6},
     {'城市': '拉萨', '最低气温': -6},
     {'城市': '平顶山', '最低气温': -5},
     {'城市': '南阳', '最低气温': -5},
     {'城市': '开封', '最低气温': -5},
     {'城市': '洛阳', '最低气温': -5},
     {'城市': '焦作', '最低气温': -5},
     {'城市': '驻马店', '最低气温': -5},
     {'城市': '合肥', '最低气温': -5},
     {'城市': '宿州', '最低气温': -5},
     {'城市': '亳州', '最低气温': -5},
     {'城市': '青岛', '最低气温': -5},
     {'城市': '日照', '最低气温': -5},
     {'城市': '周口', '最低气温': -4},
     {'城市': '淮南', '最低气温': -4},
     {'城市': '阜阳', '最低气温': -4},
     {'城市': '南京', '最低气温': -4},
     {'城市': '扬州', '最低气温': -4},
     {'城市': '泰州', '最低气温': -4},
     {'城市': '商洛', '最低气温': -4},
     {'城市': '铜川', '最低气温': -4},
     {'城市': '林芝', '最低气温': -4},
     {'城市': '神农架', '最低气温': -3},
     {'城市': '随州', '最低气温': -3},
     {'城市': '芜湖', '最低气温': -3},
     {'城市': '马鞍山', '最低气温': -3},
     {'城市': '六安', '最低气温': -3},
     {'城市': '镇江', '最低气温': -3},
     {'城市': '烟台', '最低气温': -3},
     {'城市': '咸阳', '最低气温': -3},
     {'城市': '杨凌', '最低气温': -3},
     {'城市': '十堰', '最低气温': -2},
     {'城市': '信阳', '最低气温': -2},
     {'城市': '宣城', '最低气温': -2},
     {'城市': '盐城', '最低气温': -2},
     {'城市': '常州', '最低气温': -2},
     {'城市': '西安', '最低气温': -2},
     {'城市': '渭南', '最低气温': -2},
     {'城市': '陇南', '最低气温': -2},
     {'城市': '襄阳', '最低气温': -1},
     {'城市': '安庆', '最低气温': -1},
     {'城市': '铜陵', '最低气温': -1},
     {'城市': '无锡', '最低气温': -1},
     {'城市': '南通', '最低气温': -1},
     {'城市': '宝鸡', '最低气温': -1},
     {'城市': '丽江', '最低气温': -1},
     {'城市': '武汉', '最低气温': 0},
     {'城市': '孝感', '最低气温': 0},
     {'城市': '宜昌', '最低气温': 0},
     {'城市': '荆门', '最低气温': 0},
     {'城市': '天门', '最低气温': 0},
     {'城市': '黄山', '最低气温': 0},
     {'城市': '池州', '最低气温': 0},
     {'城市': '苏州', '最低气温': 0},
     {'城市': '湖州', '最低气温': 0},
     {'城市': '安康', '最低气温': 0},
     {'城市': '汉中', '最低气温': 0},
     {'城市': '城口', '最低气温': 0},
     {'城市': '荆州', '最低气温': 1},
     {'城市': '仙桃', '最低气温': 1},
     {'城市': '潜江', '最低气温': 1},
     {'城市': '嘉兴', '最低气温': 1},
     {'城市': '昆明', '最低气温': 1},
     {'城市': '大理', '最低气温': 1},
     {'城市': '昭通', '最低气温': 1},
     {'城市': '黄冈', '最低气温': 2},
     {'城市': '崇明', '最低气温': 2},
     {'城市': '杭州', '最低气温': 2},
     {'城市': '绍兴', '最低气温': 2},
     {'城市': '九江', '最低气温': 2},
     {'城市': '凉山', '最低气温': 2},
     {'城市': '鄂州', '最低气温': 3},
     {'城市': '黄石', '最低气温': 3},
     {'城市': '咸宁', '最低气温': 3},
     {'城市': '常德', '最低气温': 3},
     {'城市': '张家界', '最低气温': 3},
     {'城市': '湘西', '最低气温': 3},
     {'城市': '嘉定', '最低气温': 3},
     {'城市': '金山', '最低气温': 3},
     {'城市': '青浦', '最低气温': 3},
     {'城市': '松江', '最低气温': 3},
     {'城市': '资阳', '最低气温': 3},
     {'城市': '广元', '最低气温': 3},
     {'城市': '巫山', '最低气温': 3},
     {'城市': '梁平', '最低气温': 3},
     {'城市': '毕节', '最低气温': 3},
     {'城市': '六盘水', '最低气温': 3},
     {'城市': '恩施', '最低气温': 4},
     {'城市': '益阳', '最低气温': 4},
     {'城市': '娄底', '最低气温': 4},
     {'城市': '岳阳', '最低气温': 4},
     {'城市': '怀化', '最低气温': 4},
     {'城市': '上海', '最低气温': 4},
     {'城市': '闵行', '最低气温': 4},
     {'城市': '宝山', '最低气温': 4},
     {'城市': '黄浦', '最低气温': 4},
     {'城市': '浦东新区', '最低气温': 4},
     {'城市': '奉贤', '最低气温': 4},
     {'城市': '徐汇', '最低气温': 4},
     {'城市': '长宁', '最低气温': 4},
     {'城市': '静安', '最低气温': 4},
     {'城市': '普陀', '最低气温': 4},
     {'城市': '虹口', '最低气温': 4},
     {'城市': '杨浦', '最低气温': 4},
     {'城市': '宁波', '最低气温': 4},
     {'城市': '衢州', '最低气温': 4},
     {'城市': '遂宁', '最低气温': 4},
     {'城市': '内江', '最低气温': 4},
     {'城市': '雅安', '最低气温': 4},
     {'城市': '德阳', '最低气温': 4},
     {'城市': '巫溪', '最低气温': 4},
     {'城市': '贵阳', '最低气温': 4},
     {'城市': '黔南', '最低气温': 4},
     {'城市': '湘潭', '最低气温': 5},
     {'城市': '邵阳', '最低气温': 5},
     {'城市': '金华', '最低气温': 5},
     {'城市': '舟山', '最低气温': 5},
     {'城市': '景德镇', '最低气温': 5},
     {'城市': '攀枝花', '最低气温': 5},
     {'城市': '绵阳', '最低气温': 5},
     {'城市': '巴中', '最低气温': 5},
     {'城市': '大足', '最低气温': 5},
     {'城市': '遵义', '最低气温': 5},
     {'城市': '安顺', '最低气温': 5},
     {'城市': '黔东南', '最低气温': 5},
     {'城市': '玉溪', '最低气温': 5},
     {'城市': '楚雄', '最低气温': 5},
     {'城市': '长沙', '最低气温': 6},
     {'城市': '株洲', '最低气温': 6},
     {'城市': '衡阳', '最低气温': 6},
     {'城市': '郴州', '最低气温': 6},
     {'城市': '台州', '最低气温': 6},
     {'城市': '丽水', '最低气温': 6},
     {'城市': '南昌', '最低气温': 6},
     {'城市': '新余', '最低气温': 6},
     {'城市': '成都', '最低气温': 6},
     {'城市': '自贡', '最低气温': 6},
     {'城市': '南充', '最低气温': 6},
     {'城市': '达州', '最低气温': 6},
     {'城市': '广安', '最低气温': 6},
     {'城市': '宜宾', '最低气温': 6},
     {'城市': '乐山', '最低气温': 6},
     {'城市': '眉山', '最低气温': 6},
     {'城市': '云阳', '最低气温': 6},
     {'城市': '奉节', '最低气温': 6},
     {'城市': '石柱', '最低气温': 6},
     {'城市': '铜梁', '最低气温': 6},
     {'城市': '酉阳', '最低气温': 6},
     {'城市': '开州', '最低气温': 6},
     {'城市': '铜仁', '最低气温': 6},
     {'城市': '曲靖', '最低气温': 6},
     {'城市': '保山', '最低气温': 6},
     {'城市': '永州', '最低气温': 7},
     {'城市': '上饶', '最低气温': 7},
     {'城市': '宜春', '最低气温': 7},
     {'城市': '泸州', '最低气温': 7},
     {'城市': '合川', '最低气温': 7},
     {'城市': '黔江', '最低气温': 7},
     {'城市': '万州', '最低气温': 7},
     {'城市': '潼南', '最低气温': 7},
     {'城市': '垫江', '最低气温': 7},
     {'城市': '忠县', '最低气温': 7},
     {'城市': '荣昌', '最低气温': 7},
     {'城市': '綦江', '最低气温': 7},
     {'城市': '抚州', '最低气温': 8},
     {'城市': '吉安', '最低气温': 8},
     {'城市': '萍乡', '最低气温': 8},
     {'城市': '鹰潭', '最低气温': 8},
     {'城市': '永川', '最低气温': 8},
     {'城市': '南川', '最低气温': 8},
     {'城市': '渝北', '最低气温': 8},
     {'城市': '巴南', '最低气温': 8},
     {'城市': '长寿', '最低气温': 8},
     {'城市': '涪陵', '最低气温': 8},
     {'城市': '璧山', '最低气温': 8},
     {'城市': '武隆', '最低气温': 8},
     {'城市': '秀山', '最低气温': 8},
     {'城市': '黔西南', '最低气温': 8},
     {'城市': '临沧', '最低气温': 8},
     {'城市': '温州', '最低气温': 9},
     {'城市': '江津', '最低气温': 9},
     {'城市': '北碚', '最低气温': 9},
     {'城市': '丰都', '最低气温': 9},
     {'城市': '彭水', '最低气温': 9},
     {'城市': '柳州', '最低气温': 10},
     {'城市': '贺州', '最低气温': 10},
     {'城市': '赣州', '最低气温': 10},
     {'城市': '重庆', '最低气温': 10},
     {'城市': '渝中', '最低气温': 10},
     {'城市': '大渡口', '最低气温': 10},
     {'城市': '江北', '最低气温': 10},
     {'城市': '沙坪坝', '最低气温': 10},
     {'城市': '九龙坡', '最低气温': 10},
     {'城市': '南岸', '最低气温': 10},
     {'城市': '普洱', '最低气温': 10},
     {'城市': '怒江', '最低气温': 10},
     {'城市': '德宏', '最低气温': 10},
     {'城市': '桂林', '最低气温': 11},
     {'城市': '韶关', '最低气温': 11},
     {'城市': '红河', '最低气温': 11},
     {'城市': '来宾', '最低气温': 12},
     {'城市': '贵港', '最低气温': 12},
     {'城市': '河池', '最低气温': 12},
     {'城市': '宁德', '最低气温': 12},
     {'城市': '南平', '最低气温': 12},
     {'城市': '文山', '最低气温': 12},
     {'城市': '梧州', '最低气温': 13},
     {'城市': '福州', '最低气温': 13},
     {'城市': '三明', '最低气温': 13},
     {'城市': '西双版纳', '最低气温': 13},
     {'城市': '台中', '最低气温': 13},
     {'城市': '佛山', '最低气温': 14},
     {'城市': '清远', '最低气温': 14},
     {'城市': '莆田', '最低气温': 14},
     {'城市': '泉州', '最低气温': 14},
     {'城市': '南宁', '最低气温': 15},
     {'城市': '崇左', '最低气温': 15},
     {'城市': '玉林', '最低气温': 15},
     {'城市': '百色', '最低气温': 15},
     {'城市': '广州', '最低气温': 15},
     {'城市': '梅州', '最低气温': 15},
     {'城市': '河源', '最低气温': 15},
     {'城市': '潮州', '最低气温': 15},
     {'城市': '揭阳', '最低气温': 15},
     {'城市': '厦门', '最低气温': 15},
     {'城市': '龙岩', '最低气温': 15},
     {'城市': '钦州', '最低气温': 16},
     {'城市': '北海', '最低气温': 16},
     {'城市': '惠州', '最低气温': 16},
     {'城市': '汕头', '最低气温': 16},
     {'城市': '肇庆', '最低气温': 16},
     {'城市': '云浮', '最低气温': 16},
     {'城市': '东莞', '最低气温': 16},
     {'城市': '中山', '最低气温': 16},
     {'城市': '漳州', '最低气温': 16},
     {'城市': '台北', '最低气温': 16},
     {'城市': '防城港', '最低气温': 17},
     {'城市': '珠海', '最低气温': 17},
     {'城市': '江门', '最低气温': 17},
     {'城市': '阳江', '最低气温': 17},
     {'城市': '汕尾', '最低气温': 17},
     {'城市': '儋州', '最低气温': 17},
     {'城市': '白沙', '最低气温': 17},
     {'城市': '五指山', '最低气温': 17},
     {'城市': '澳门', '最低气温': 17},
     {'城市': '深圳', '最低气温': 18},
     {'城市': '湛江', '最低气温': 18},
     {'城市': '茂名', '最低气温': 18},
     {'城市': '临高', '最低气温': 18},
     {'城市': '琼中', '最低气温': 18},
     {'城市': '东方', '最低气温': 19},
     {'城市': '澄迈', '最低气温': 19},
     {'城市': '昌江', '最低气温': 19},
     {'城市': '定安', '最低气温': 19},
     {'城市': '屯昌', '最低气温': 19},
     {'城市': '保亭', '最低气温': 19},
     {'城市': '乐东', '最低气温': 19},
     {'城市': '香港', '最低气温': 19},
     {'城市': '海口', '最低气温': 20},
     {'城市': '三亚', '最低气温': 20},
     {'城市': '琼海', '最低气温': 20},
     {'城市': '文昌', '最低气温': 20},
     {'城市': '万宁', '最低气温': 20},
     {'城市': '陵水', '最低气温': 20},
     {'城市': '钓鱼岛', '最低气温': 20},
     {'城市': '高雄', '最低气温': 20},
     {'城市': '西沙', '最低气温': 24},
     {'城市': '中沙', '最低气温': 25},
     {'城市': '南沙', '最低气温': 26}]




```python
a = ALL_DATA[0:10] 
```


```python
type(a)
```




    list




```python
print(a)
```

    [{'城市': '大兴安岭', '最低气温': -36}, {'城市': '鹤岗', '最低气温': -32}, {'城市': '呼伦贝尔', '最低气温': -31}, {'城市': '黑河', '最低气温': -30}, {'城市': '哈尔滨', '最低气温': -29}, {'城市': '绥化', '最低气温': -29}, {'城市': '大庆', '最低气温': -29}, {'城市': '四平', '最低气温': -29}, {'城市': '锡林郭勒', '最低气温': -28}, {'城市': '七台河', '最低气温': -28}]
    


```python
print(data)
```

    {'城市': '七台河', '最低气温': -28}
    


```python
str(data)
```




    {'城市': '松原', '最低气温': -28}




```python
data
```




    {'城市': '松原', '最低气温': -28}




```python
print(data)
```

    {'城市': '七台河', '最低气温': -28}
    


```python
type(ALL_DATA)
```




    list




```python
type(data)
```




    dict




```python
str(a)
```




    "[{'城市': '大兴安岭', '最低气温': -36}, {'城市': '鹤岗', '最低气温': -32}, {'城市': '呼伦贝尔', '最低气温': -31}, {'城市': '黑河', '最低气温': -30}, {'城市': '哈尔滨', '最低气温': -29}, {'城市': '绥化', '最低气温': -29}, {'城市': '大庆', '最低气温': -29}, {'城市': '四平', '最低气温': -29}, {'城市': '锡林郭勒', '最低气温': -28}, {'城市': '七台河', '最低气温': -28}]"




```python
str(a)
```




    "[{'城市': '大兴安岭', '最低气温': -36}, {'城市': '鹤岗', '最低气温': -32}, {'城市': '呼伦贝尔', '最低气温': -31}, {'城市': '黑河', '最低气温': -30}, {'城市': '哈尔滨', '最低气温': -29}, {'城市': '绥化', '最低气温': -29}, {'城市': '大庆', '最低气温': -29}, {'城市': '四平', '最低气温': -29}, {'城市': '锡林郭勒', '最低气温': -28}, {'城市': '七台河', '最低气温': -28}]"




```python
data
```




    {'城市': '七台河', '最低气温': -28}




```python
print(a)
```

    [{'城市': '大兴安岭', '最低气温': -36}, {'城市': '鹤岗', '最低气温': -32}, {'城市': '呼伦贝尔', '最低气温': -31}, {'城市': '黑河', '最低气温': -30}, {'城市': '哈尔滨', '最低气温': -29}, {'城市': '绥化', '最低气温': -29}, {'城市': '大庆', '最低气温': -29}, {'城市': '四平', '最低气温': -29}, {'城市': '锡林郭勒', '最低气温': -28}, {'城市': '七台河', '最低气温': -28}]
    


```python
type(datas)
```




    list




```python
datas
```




    [{'城市': '呼伦贝尔', '最低气温': -32},
     {'城市': '大兴安岭', '最低气温': -31},
     {'城市': '伊春', '最低气温': -29},
     {'城市': '哈尔滨', '最低气温': -28},
     {'城市': '绥化', '最低气温': -27},
     {'城市': '黑河', '最低气温': -27},
     {'城市': '大庆', '最低气温': -27},
     {'城市': '鹤岗', '最低气温': -27},
     {'城市': '大同', '最低气温': -26},
     {'城市': '佳木斯', '最低气温': -26}]




```python
Strdata = [str(j) for j in datas]
str2 = ','.join(Strdata)
str2
```




    "{'城市': '呼伦贝尔', '最低气温': -32},{'城市': '大兴安岭', '最低气温': -31},{'城市': '伊春', '最低气温': -29},{'城市': '哈尔滨', '最低气温': -28},{'城市': '绥化', '最低气温': -27},{'城市': '黑河', '最低气温': -27},{'城市': '大庆', '最低气温': -27},{'城市': '鹤岗', '最低气温': -27},{'城市': '大同', '最低气温': -26},{'城市': '佳木斯', '最低气温': -26}"




```python
join
```


    ---------------------------------------------------------------------------

    NameError                                 Traceback (most recent call last)

    <ipython-input-20-ca88921fe3b2> in <module>
    ----> 1 join
    

    NameError: name 'join' is not defined



```python
Q = ['a','b','c']
J = [str(j) for j in Q]
str2 = ''.join(J)
str2
```




    'abc'




```python
datas[1]
datas[2]
```




    {'城市': '伊春', '最低气温': -29}




```python
type(datas)
```




    list




```python
datas
```




    [{'城市': '呼伦贝尔', '最低气温': -32},
     {'城市': '大兴安岭', '最低气温': -31},
     {'城市': '伊春', '最低气温': -29},
     {'城市': '哈尔滨', '最低气温': -28},
     {'城市': '绥化', '最低气温': -27},
     {'城市': '黑河', '最低气温': -27},
     {'城市': '大庆', '最低气温': -27},
     {'城市': '鹤岗', '最低气温': -27},
     {'城市': '大同', '最低气温': -26},
     {'城市': '佳木斯', '最低气温': -26}]




```python
label = ttk.Label(text='今天全国最低气温排名第1的城市'+'nini')
```


```python
label = ttk.Label(text='今天全国最低气温排名第1的城市'+'nini')
```


```python
label = ttk.Label(text='今天全国最低气温排名第1的城市'+'nini')
```


    ---------------------------------------------------------------------------

    NameError                                 Traceback (most recent call last)

    <ipython-input-1-83ec8ce94fe8> in <module>
    ----> 1 label = ttk.Label(text='今天全国最低气温排名第1的城市'+'nini')
    

    NameError: name 'ttk' is not defined



```python
import requests  #用来抓取网页的html源代码
from bs4 import BeautifulSoup   #将通过requests.get获取到的对象里面的不同属性值提取出来
import matplotlib.pyplot as plt   #导入画图的包
from tkinter import *
from tkinter import ttk
 
ALL_DATA = []          #为了以后存储所有城市的最低气温的数据
 
#以下为网页的解析函数

def parse_page(url):
    headers = {
        'User-Agent':'Mozilla/5.0 (Windows NT 10.0; Win64; x64) '
                     'AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36'
    }
    # header是requests.get的一个参数，目的是模拟浏览器访问
    
    response = requests.get(url,headers=headers) #存储requests取出的关于天气网的信息
    text = response.content.decode('utf-8')      #将二进制字符串转化为我们看得懂得中文
    soup = BeautifulSoup(text,'html5lib')       #也可以用lxml，但由于html5lib容错性较好因此用它不用lxml
    conMidtab = soup.find('div',class_ = 'conMidtab')  #提取所有的div的值
    tables = conMidtab.find_all('table')               #将所有的div中的值存储进table
    
    #查看是否拿到了每个城市的天气
    for table in tables:
        trs = table.find_all('tr')[2:]                 #查看每一个城市，从天气网发现第3个tr标签才是所需要的，因此用tr[2]
        for index,tr in enumerate(trs):                #enumerate用于将一个可遍历的数据对象(如列表、元组或字符串)组合为一个索引序列，同时列出数据和数据下标
            tds = tr.find_all('td')                    #从天气网看到每个城市的信息，如城市名和最低气温等，都存在td里面，因此要拿到td中的数据
            city_td = tds[0]                           #提取每一个城市的名称
            if index == 0:
                city_td = tds[1]
            city = list(city_td.stripped_strings)[0]     #获取标签里面的字符串属性，并返回一个生成器,因此要转化为一个列表
            temp_td = tds[-2]                            #提取每一座城市的
            min_temp = list(temp_td.stripped_strings)[0]
            ALL_DATA.append({'城市':city,'最低气温':int(min_temp)})        #将数据添加到列表
 
 
def getweather():
    urls = [
        'http://www.weather.com.cn/textFC/hb.shtml',  #华北地区
        'http://www.weather.com.cn/textFC/db.shtml',  #东北地区
        'http://www.weather.com.cn/textFC/hz.shtml',  #华中地区
        'http://www.weather.com.cn/textFC/hn.shtml',  #华南地区
        'http://www.weather.com.cn/textFC/hd.shtml',  #华东地区
        'http://www.weather.com.cn/textFC/xb.shtml',  #西北地区
        'http://www.weather.com.cn/textFC/xn.shtml',  #西南地区
        'http://www.weather.com.cn/textFC/gat.shtml'  #港澳台地区
    ]
    
    for url in urls:
        parse_page(url)  #调用parse_page函数
        
    ALL_DATA.sort(key=lambda data:data['最低气温'])  #lambda为匿名函数，sort是将这些数据按照“最低气温”排序
    data = ALL_DATA[0:10]                            #取出前10的最低气温及其城市
     
    return data                                     #返回最低气温前十的数据

def on_click():
    datas = getweather()
#     Strdata = [str(j) for j in datas]
#     str2 = ','.join(Strdata)
    label1['text'] =datas[0]
    label2['text'] =datas[1]
    label3['text'] =datas[2]
    label4['text'] =datas[3]
    label5['text'] =datas[4]
    label6['text'] =datas[5]
    label7['text'] =datas[6]
    label8['text'] =datas[7]
    label9['text'] =datas[8]
    label10['text'] =datas[9]
    label11['text'] ='可以去代码界面看可视化图形哦！，具体操作方法：注释mainloop(),再重新运行~'
    

label1 = ttk.Label(text='今天全国最低气温排名第1的城市')
label1.pack()
label1.place(x=30,y=40)

label2 = ttk.Label(text='今天全国最低气温排名第2的城市')
label2.pack()
label2.place(x=30,y=60)

label3 = ttk.Label(text='今天全国最低气温排名第3的城市')
label3.pack()
label3.place(x=30,y=80)

label4 = ttk.Label(text='今天全国最低气温排名第4的城市')
label4.pack()
label4.place(x=30,y=100)

label5 = ttk.Label(text='今天全国最低气温排名第5的城市')
label5.pack()
label5.place(x=30,y=120)

label6 = ttk.Label(text='今天全国最低气温排名第6的城市')
label6.pack()
label6.place(x=30,y=140)

label7 = ttk.Label(text='今天全国最低气温排名第7的城市')
label7.pack()
label7.place(x=30,y=160)

label8 = ttk.Label(text='今天全国最低气温排名第8的城市')
label8.pack()
label8.place(x=30,y=180)

label9 = ttk.Label(text='今天全国最低气温排名第9的城市')
label9.pack()
label9.place(x=30,y=200)

label10 = ttk.Label(text='今天全国最低气温排名第10的城市')
label10.pack()
label10.place(x=30,y=220)

label11 = ttk.Label(text='')
label11.pack()
label11.place(x=30,y=290)
   
button = ttk.Button()
button.pack()
# button.place(x=90，y=20)
button['text'] = '点击查看今天全国最低气温排名前十的城市'
button['command'] = on_click

mainloop()

        
if __name__ == '__main__': 
    datas = getweather()                                  #调用getweather函数
    city = []
    temp = []
    plt.rcParams['font.sans-serif'] = ['SimHei']     # 用来正常显示中文标签
    plt.rcParams['axes.unicode_minus'] = False      # 用来正常显示负号
    for data in datas:
        city.append(data['城市'])
        temp.append(data['最低气温'])
    plt.bar(range(len(city)),temp,tick_label=city)    #定义横纵坐标
    plt.show()
```


```python

```
